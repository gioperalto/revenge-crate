include ../partials/header.pug
body.black
  include ../partials/navbar.pug

  div.section.black
    div.row.container
      each thing in things
        div.col.s12.m6.l4
          div.card
            div.card-image
              if thing.inventory.quantity > 0
                img(src= thing.image)
                button(data-target='stripe').modal-trigger.btn-floating.halfway-fab.waves-effect.waves-light.red
                  i.material-icons shopping_cart
              else
                img(src='/assets/images/things/out-of-stock.jpg')
            div.card-content
              span.card-title= thing.attributes.name
              span.right $#{thing.price/100}
              p= thing.attributes.description              
  
  include ../partials/modals/purchase.pug
  include ../partials/footer.pug
  script(src='/assets/js/scripts/init-select.js')
  script(src='/assets/js/scripts/init-modal.js')
  script(src='https://js.stripe.com/v3/')
  script(src='/assets/js/scripts/stripe-handler.js')
  script.
    var key = "#{key}";
    var stripeHandler = new StripeHandler(key);
    stripeHandler.setup();
